<?xml version="1.0" encoding="UTF-8"?>

        
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:c="http://www.springframework.org/schema/c" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd 
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd 
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">


    <context:property-placeholder  />


	<bean id="testService" class="com.blandon.test.service.TestService" />
	
	<bean id="userDao" class="com.blandon.test.dao.UserDao" p:dataSource-ref="datasource"/>

	<context:component-scan base-package="com.blandon.test" />
	
	 <context:annotation-config/>

	<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

	<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />
	
	
	 <!-- datasource    -->
    <bean id="datasource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="driverClass" value="oracle.jdbc.OracleDriver" />
        <property name="jdbcUrl" value="${url:}" />
        <property name="user" value="${username:}" />
        <property name="password" value="${password:}" />

		<!--  <context:property-placeholder/> has to be defined in xml for dollar sign to work property  -->
        <property name="initialPoolSize" value="${plt_db_pool_initial_size:5}" />
        <property name="maxPoolSize" value="${plt_db_pool_max_size:25}" />
        <property name="minPoolSize" value="${plt_db_pool_min_size:0}" />
        <property name="maxStatements" value="${plt_db_pool_max_statements:10}" />

        <property name="maxIdleTime" value="${plt_db_con_max_idle_time:300}" />
        <property name="idleConnectionTestPeriod" value="${plt_db_con_test_period:3000}" />
        <property name="preferredTestQuery" value="${plt_db_con_test_query:select 1 from dual}" />
        <property name="acquireIncrement" value="${plt_db_con_acquire_increment:1}" />
        <property name="acquireRetryAttempts" value="${plt_db_con_retry_attempts:0}" />
        <property name="acquireRetryDelay" value="${plt_db_con_retry_delay:3000}" />

        <property name="dataSourceName" value="Datasource" />

        <property name="unreturnedConnectionTimeout" value="${plt_db_con_unreturned_timeout:0}" />
        <property name="debugUnreturnedConnectionStackTraces" value="${plt_db_con_debug_unreturned:false}" />
    </bean>
 
    
        <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="datasource" />
    </bean>

</beans>
